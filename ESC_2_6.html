<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±‰å­—æ‹¼æ‹¼ä¹ - ç”Ÿç—…å•å…ƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
            /* å»æ‰äº† overflow: hiddenï¼Œå…è®¸æ»šåŠ¨ */
        }
        .char-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .char-card:active {
            transform: scale(0.9);
        }
        .workbench {
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed rgba(255, 255, 255, 0.2);
        }
        .success-glow {
            animation: success-pulse 0.5s ease-out;
        }
        @keyframes success-pulse {
            0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            100% { box-shadow: 0 0 20px 20px rgba(34, 197, 94, 0); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-6 px-2">

    <!-- é¡¶æ  -->
    <div class="w-full max-w-2xl px-4 flex justify-between items-center mb-6">
        <div>
            <h1 class="text-2xl font-bold text-blue-400">æ±‰å­—æ‹¼æ‹¼ä¹</h1>
            <p class="text-xs text-slate-400">ESC-2-6 ç”Ÿç—…å•å…ƒè¯æ±‡</p>
        </div>
        <div class="text-right">
            <div class="text-3xl font-mono font-bold text-yellow-400" id="score">000</div>
            <div class="text-xs text-slate-400">SCORE</div>
        </div>
    </div>

    <!-- æ¸¸æˆä¸»åŒºåŸŸ -->
    <div class="w-full max-w-5xl flex flex-col md:flex-row gap-6 px-4">
        
        <!-- å·¦ä¾§å­—åº“ -->
        <div id="pool-left" class="flex-1 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-2 gap-2 content-start">
            <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>

        <!-- ä¸­é—´ï¼šç»„åˆåŒº (å›ºå®šåœ¨ä¸­é—´) -->
        <div class="flex-none flex flex-col items-center justify-start py-4">
            <div class="text-xs text-slate-500 mb-4 uppercase tracking-widest">Workbench / ç»„åˆåŒº</div>
            <div id="workbench" class="workbench w-64 h-64 rounded-3xl flex items-center justify-center gap-2 p-4 relative shadow-2xl">
                <div id="slot-1" class="w-20 h-20 rounded-2xl border-2 border-slate-700 bg-slate-800/80 flex items-center justify-center text-4xl font-bold text-slate-500 shadow-inner">?</div>
                <div class="text-2xl text-slate-600 font-bold">+</div>
                <div id="slot-2" class="w-20 h-20 rounded-2xl border-2 border-slate-700 bg-slate-800/80 flex items-center justify-center text-4xl font-bold text-slate-500 shadow-inner">?</div>
                
                <!-- ç»“æœæç¤º -->
                <div id="result-overlay" class="absolute inset-0 flex flex-col items-center justify-center bg-green-500 rounded-3xl opacity-0 pointer-events-none transition-opacity duration-300 z-10">
                    <span id="res-cn" class="text-6xl font-black text-white"></span>
                    <span id="res-py" class="text-xl font-bold text-green-100 mt-2"></span>
                </div>
            </div>
            
            <button onclick="clearWorkbench()" class="mt-6 px-4 py-2 bg-slate-800/50 rounded-full text-slate-400 hover:text-white transition-colors flex items-center gap-2 border border-slate-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
                </svg>
                é‡ç½®é€‰æ‹©
            </button>
        </div>

        <!-- å³ä¾§å­—åº“ -->
        <div id="pool-right" class="flex-1 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-2 gap-2 content-start">
            <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>

    </div>

    <!-- åº•éƒ¨æ¶ˆæ¯ -->
    <div id="hint" class="mt-8 mb-4 px-6 text-center text-slate-400 italic text-sm">
        æç¤ºï¼šä»ä¸¤è¾¹å„é€‰ä¸€ä¸ªå­—ï¼Œå‡‘æˆã€Šç”Ÿç—…ã€‹å•å…ƒè¯æ±‡ï¼
    </div>

    <script>
        const words = [
            { full: "è§‰å¾—", p1: "è§‰", p2: "å¾—", py: "juÃ© de" },
            { full: "åŠ›æ°”", p1: "åŠ›", p2: "æ°”", py: "lÃ¬ qi" },
            { full: "ç”Ÿç—…", p1: "ç”Ÿ", p2: "ç—…", py: "shÄ“ng bÃ¬ng" },
            { full: "å‘çƒ§", p1: "å‘", p2: "çƒ§", py: "fÄ shÄo" },
            { full: "æ„Ÿå†’", p1: "æ„Ÿ", p2: "å†’", py: "gÇn mÃ o" },
            { full: "èˆ’æœ", p1: "èˆ’", p2: "æœ", py: "shÅ« fu" },
            { full: "å¤´ç—›", p1: "å¤´", p2: "ç—›", py: "tÃ³u tÃ²ng" },
            { full: "å’³å—½", p1: "å’³", p2: "å—½", py: "kÃ© sou" },
            { full: "è‚šå­", p1: "è‚š", p2: "å­", py: "dÃ¹ zi" },
            { full: "å•æ‰€", p1: "å•", p2: "æ‰€", py: "cÃ¨ suÇ’" },
            { full: "ä¼‘æ¯", p1: "ä¼‘", p2: "æ¯", py: "xiÅ« xi" },
            { full: "å—“å­", p1: "å—“", p2: "å­", py: "sÇng zi" }
        ];

        let score = 0;
        let selectedP1 = null;
        let selectedP2 = null;

        function initGame() {
            const leftPool = document.getElementById('pool-left');
            const rightPool = document.getElementById('pool-right');
            
            const leftChars = words.map(w => w.p1).sort(() => Math.random() - 0.5);
            const rightChars = words.map(w => w.p2).sort(() => Math.random() - 0.5);

            leftPool.innerHTML = leftChars.map(char => `
                <button onclick="selectChar(1, '${char}', this)" class="char-card bg-slate-800/60 border-l-4 border-blue-500 p-4 rounded-xl text-2xl font-bold hover:bg-blue-900/40 text-slate-200 shadow-lg">
                    ${char}
                </button>
            `).join('');

            rightPool.innerHTML = rightChars.map(char => `
                <button onclick="selectChar(2, '${char}', this)" class="char-card bg-slate-800/60 border-r-4 border-purple-500 p-4 rounded-xl text-2xl font-bold hover:bg-purple-900/40 text-slate-200 shadow-lg">
                    ${char}
                </button>
            `).join('');
        }

        function selectChar(side, char, element) {
            if (side === 1) {
                document.querySelectorAll('#pool-left button').forEach(b => b.classList.remove('bg-blue-600', 'ring-2', 'ring-white', 'scale-105'));
                selectedP1 = char;
                element.classList.add('bg-blue-600', 'ring-2', 'ring-white', 'scale-105');
                document.getElementById('slot-1').textContent = char;
                document.getElementById('slot-1').classList.replace('text-slate-500', 'text-white');
            } else {
                document.querySelectorAll('#pool-right button').forEach(b => b.classList.remove('bg-purple-600', 'ring-2', 'ring-white', 'scale-105'));
                selectedP2 = char;
                element.classList.add('bg-purple-600', 'ring-2', 'ring-white', 'scale-105');
                document.getElementById('slot-2').textContent = char;
                document.getElementById('slot-2').classList.replace('text-slate-500', 'text-white');
            }

            checkMatch();
        }

        function checkMatch() {
            if (selectedP1 && selectedP2) {
                const combined = selectedP1 + selectedP2;
                const match = words.find(w => w.full === combined);

                if (match) {
                    handleSuccess(match);
                } else {
                    handleFailure();
                }
            }
        }

        function handleSuccess(match) {
            score += 10;
            document.getElementById('score').textContent = score.toString().padStart(3, '0');
            
            const overlay = document.getElementById('result-overlay');
            const wb = document.getElementById('workbench');
            
            document.getElementById('res-cn').textContent = match.full;
            document.getElementById('res-py').textContent = match.py;
            
            overlay.classList.remove('opacity-0');
            wb.classList.add('success-glow');
            
            setTimeout(() => {
                overlay.classList.add('opacity-0');
                wb.classList.remove('success-glow');
                removeMatchedChars(selectedP1, selectedP2);
                clearWorkbench();
                if (document.querySelectorAll('.char-card').length === 0) showWin();
            }, 800);
        }

        function handleFailure() {
            const wb = document.getElementById('workbench');
            wb.classList.add('bg-red-900/40');
            setTimeout(() => {
                wb.classList.remove('bg-red-900/40');
                clearWorkbench();
            }, 400);
        }

        function clearWorkbench() {
            selectedP1 = null;
            selectedP2 = null;
            document.getElementById('slot-1').textContent = "?";
            document.getElementById('slot-2').textContent = "?";
            document.getElementById('slot-1').classList.replace('text-white', 'text-slate-500');
            document.getElementById('slot-2').classList.replace('text-white', 'text-slate-500');
            document.querySelectorAll('.char-card').forEach(b => b.classList.remove('bg-blue-600', 'bg-purple-600', 'ring-2', 'ring-white', 'scale-105'));
        }

        function removeMatchedChars(p1, p2) {
            document.querySelectorAll('#pool-left button').forEach(b => { if (b.textContent.trim() === p1) b.remove(); });
            document.querySelectorAll('#pool-right button').forEach(b => { if (b.textContent.trim() === p2) b.remove(); });
        }

        function showWin() {
            document.getElementById('workbench').innerHTML = `
                <div class="text-center p-4">
                    <div class="text-6xl mb-4">ğŸ‰</div>
                    <div class="text-2xl font-bold text-yellow-400">å…¨éƒ¨æ‹¼å¯¹ï¼</div>
                    <button onclick="location.reload()" class="mt-6 px-8 py-2 bg-blue-600 rounded-full font-bold hover:bg-blue-500 transition-all">å†ç©ä¸€æ¬¡</button>
                </div>
            `;
            document.getElementById('hint').textContent = "å®Œç¾é€šå…³ï¼";
        }

        window.onload = initGame;
    </script>
</body>
</html>
